{"title":"\u5206\u4eab","scrolling":true,"loadflow":"","init":"\nOF.setActiveFootermenu();OF.setFootermenu();$('body').addClass('textured');$('.button').pretouch();if(!OF.friendsList){OF.friendsList={init:function(){$('#friends').data('total_pages',1);$('#friends').data('next_page',1);$('#friends').data('is_loading_more',false);$('#load_more').hide();$('#friends_list > ul .user').remove();$('#friends ul#loading').unhide();OF.friendsList.load_data(function(){if($('#friends').data('next_page')>$('#friends').data('total_pages')){$(\"#load_more\").hide();}else{$(\"#load_more\").unhide();}\n$(\"#friends ul#loading\").hide();});},load_more:function(){if(!$('#friends').data('is_loading_more')){$('#friends').data('is_loading_more',true);$(\"#load_more\").html(\"\u8bfb\u53d6\u4e2d....\");OF.friendsList.load_data(function(){if($('#friends').data('next_page')>$('#friends').data('total_pages')){$(\"#load_more\").hide();}\n$(\"#load_more\").html(\"\u8bfb\u53d6\u66f4\u591a\");$('#friends').data('is_loading_more',false);});}},load_data:function(callback){OF.api.request('/xp/friends',{params:{user_id:OF.page.user.id,page:$('#friends').data('next_page'),per_page:10,for_friends_list_page_optimization:true},success:function(data){if($('#friends').data('next_page')==1){OF.friendsList.renderFriends(data.users);$('#friends').data('total_pages',data.total_pages);}else{OF.friendsList.addFriends(data.users);}\n$('#friends').data('next_page',$('#friends').data('next_page')+1);callback();}});},renderFriendItems:function(friends){var html=$.map(friends,function(friend){return tmpl('user_tmpl',friend);});return html;},renderFriends:function(friends){var html=OF.friendsList.renderFriendItems(friends);if(html.length>0){$(html.join(\" \")).insertBefore($(\"#friends_list > ul #load_more\"));$(\"#friends_list .no_data\").hide();}else{$('#friends_list > ul').hide();$(\"#friends_list .no_data\").unhide();}},addFriends:function(friends){var html=OF.friendsList.renderFriendItems(friends);$(html.join(\" \")).insertBefore($(\"#friends_list > ul #load_more\"));}};}\n$('#home_button').touch(OF.menu.home);var game_id=OF.page.params.gameid||0;var leaderboard_id=OF.page.params.leaderboard_id||0;var achievement_id=OF.page.params.achievement_id||0;var rank=OF.page.params.rank||0;var isWeibo=false;var isTencent=false;var platform=\"sina\";OF.api.request('/xp/friends/snsstatus',{background:true,method:'GET',success:function(data){if(data.snsstatus.weibo_status){$('#weibo_share .subtitle').text('\u5df2\u7ed1\u5b9a');isWeibo=true;}else{$('#weibo_share .subtitle').text('\u672a\u7ed1\u5b9a');}\nif(data.snsstatus.tx_status){$('#tencent_share .subtitle').text('\u5df2\u7ed1\u5b9a');isTencent=true;}else{$('#tencent_share .subtitle').text('\u672a\u7ed1\u5b9a');}}});navTo=function(){OF.navigateToUrl(\"dashboard/share\",{params:{type:platform,gameid:game_id,leaderboardid:leaderboard_id,achievementid:achievement_id,rank:rank}});}\nweiboDidReturn=function(retval){OF.api.request(\"/xp/link\",{method:\"POST\",params:{token:retval},success:function(){navTo();}});}\ntencentDidReturn=function(retval){OF.api.request(\"/xp/txlink\",{method:\"POST\",params:{token:retval},success:function(){navTo();}});}\nweiboDidFail=function(errorCode,errorDesc){OF.log(_('Weibo fail (%1), `%2`',errorCode,errorDesc));OF.alert(errorDesc,_('Sorry!  We can&apos;t reach the Internet right now.  Please try again later.'));}\n$('#weibo_share').touch(function(){platform=\"sina\";if(isWeibo==false){OF.api.request('/xp/geturl',{method:\"GET\",success:function(data){OF.WeiboUrl=data.weibo_url;OF.sendAction('openBrowser',{src:OF.WeiboUrl,callback:'weiboDidReturn',timeout:30000,on_failure:'weiboDidFail'});}})}else{navTo();}})\n$('#tencent_share').touch(function(){platform=\"tencent\";if(isTencent==false){OF.api.request('/xp/txgeturl',{method:\"GET\",success:function(data){OF.TencentUrl=data.tencent_url;OF.sendAction('openBrowser',{src:OF.TencentUrl,callback:'tencentDidReturn',timeout:30000,on_failure:'weiboDidFail'});}})}else{navTo();}})","resume":"\nOF.setActiveFootermenu();","appear":"\n$('#header .title').html(OF.page.title);","html":"<div id='dashboard'>\n<div id='header'>\n<span class='loading'>\n<span class='spinner'></span>\n</span>\n<div class='title' id='home_button'></div>\n</div>\n<div id='shareto'>\n<section id='share_to'>\n<h3 class='section_title t'>\u5206\u4eab\u5230</h3>\n<div id='weibo_share'>\n<div class='cell one_line'>\n<div class='icon'></div>\n<div class='snstitle t'>\u5206\u4eab\u5230\u65b0\u6d6a\u5fae\u535a</div>\n<div class='subtitle'></div>\n</div>\n</div>\n<div id='tencent_share'>\n<div class='cell one_line'>\n<div class='icon'></div>\n<div class='snstitle t'>\u5206\u4eab\u5230\u817e\u8baf\u5fae\u535a</div>\n<div class='subtitle'></div>\n</div>\n</div>\n</section>\n</div>\n\n<br clear='both'>\n<div id='footer'>\n<div class='footer_menu' id='footer_menu_for_2_1' style='display:none'>\n<ul class='footer_tabs'>\n<li class='footer_tab active'>\n<label class='user_tab'>\u6211\u7684\u7a7a\u95f4</label>\n<div class='right_bar'></div>\n</li>\n<li class='footer_tab' style='border-right:none'>\n<label class='game_tab'>\u6e38\u620f\u63a8\u8350</label>\n<div class='right_bar'></div>\n</li>\n</ul>\n</div>\n</div>\n<br clear='both'>\n<div class='footer_menu' id='footer_menu_for_2_2'>\n<ul class='footer_tabs'>\n<li class='footer_tab active'>\n<label class='user_tab'>\u6211\u7684\u7a7a\u95f4</label>\n<div class='right_bar'></div>\n</li>\n<li class='footer_tab' style='border-right:none'>\n<label class='game_tab'>\u6e38\u620f\u63a8\u8350</label>\n<div class='right_bar'></div>\n</li>\n</ul>\n</div>\n</div>\n"}