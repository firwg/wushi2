{"title":"Change Password","scrolling":true,"loadflow":"","init":"\nOF.setActiveFootermenu();OF.setFootermenu();$('body').addClass('textured');$('#subheader').text(_(OF.page.title));$('#change_password_form').submit(function(){if($(this).isLoading())return false;if($('#change_password_form').isFormFilled(_('Please fill out all fields in order to change your password.'))){$(this).isLoading(true);var password=$('#user_http_basic_credential_attributes_password').val();var password_confirmation=$('#user_http_basic_credential_attributes_password_confirmation').val();if(password!=password_confirmation){OF.alert('\u9519\u8bef\u63d0\u793a','\u5bc6\u7801\u8f93\u5165\u4e0d\u5339\u914d');$('#change_password_form').isLoading(false);return false;}else if(password.length<6||password_confirmation<6){OF.alert('\u9519\u8bef\u63d0\u793a','\u5bc6\u7801\u8bbe\u7f6e\u8fc7\u77ed\uff0c\u81f3\u5c116\u4f4d\u6570\u5b57\u6216\u5b57\u6bcd');$('#change_password_form').isLoading(false);return false;}else{OF.api.request('/xp/users/'+OF.user.id,{method:'PUT',loader:'#submit',params:{password:$('#password').val(),user:{http_basic_credential_attributes:{password:password,password_confirmation:password_confirmation,}}},success:function(){OF.goBack();OF.alert(_('Success'),_('You have changed your password.'));},failure:function(data){if(data.exception){if(data.exception['class']=='PlayerNotAuthenticated'){OF.alert(_('Error'),_('Your curent password was not correct.'));}else{return false;}}else{return false;}},complete:function(){$('#change_password_form').isLoading(false);}});}}\nreturn false;});$('#submit').touch(function(){$('#change_password_form').submit();});","resume":"\nOF.setActiveFootermenu();","appear":"","html":"<div id='settings'>\n<div class='t' id='header'>Settings</div>\n<div id='subheader'></div>\n<form id='change_password_form'>\n<div class='input_field'>\n<label class='t'>Current Password</label>\n<input id='password' name='password' type='password'>\n</div>\n<div class='input_field'>\n<label class='t'>New Password</label>\n<input id='user_http_basic_credential_attributes_password' name='user[http_basic_credential_attributes][password]' type='password'>\n</div>\n<div class='input_field'>\n<label class='t'>Confirm Password</label>\n<input id='user_http_basic_credential_attributes_password_confirmation' name='user[http_basic_credential_attributes][password_confirmation]' type='password'>\n</div>\n<div class='button t' id='submit'>Okay</div>\n</form>\n\n<br clear='both'>\n<div id='footer'>\n<div class='footer_menu' id='footer_menu_for_2_1' style='display:none'>\n<ul class='footer_tabs'>\n<li class='footer_tab active'>\n<label class='user_tab'>\u6211\u7684\u7a7a\u95f4</label>\n<div class='right_bar'></div>\n</li>\n<li class='footer_tab' style='border-right:none'>\n<label class='game_tab'>\u6e38\u620f\u63a8\u8350</label>\n<div class='right_bar'></div>\n</li>\n</ul>\n</div>\n</div>\n<br clear='both'>\n<div class='footer_menu' id='footer_menu_for_2_2'>\n<ul class='footer_tabs'>\n<li class='footer_tab active'>\n<label class='user_tab'>\u6211\u7684\u7a7a\u95f4</label>\n<div class='right_bar'></div>\n</li>\n<li class='footer_tab' style='border-right:none'>\n<label class='game_tab'>\u6e38\u620f\u63a8\u8350</label>\n<div class='right_bar'></div>\n</li>\n</ul>\n</div>\n</div>\n"}